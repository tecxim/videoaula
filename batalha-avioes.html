<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Batalha Aérea Cartoon 3D</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            background: linear-gradient(to bottom, #87CEEB, #1E90FF);
            font-family: 'Arial', sans-serif;
            user-select: none;
        }
        #game-container {
            position: relative;
            width: 100vw;
            height: 100vh;
            overflow: hidden;
        }
        #sky {
            position: absolute;
            top: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(to bottom, #87CEEB, #1E90FF);
        }
        .cloud {
            position: absolute;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 50px;
            animation: cloudMove 30s linear infinite;
        }
        @keyframes cloudMove {
            0% { transform: translateX(-100px); }
            100% { transform: translateX(100vw); }
        }
        #player-plane {
            position: absolute;
            bottom: 50px;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 50px;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 50"><!-- Avião do jogador em estilo cartoon 3D --><path d="M10,25 L20,10 L80,10 L90,25 L80,40 L20,40 Z" fill="%23FF5733"/><circle cx="30" cy="25" r="5" fill="%23FFC300"/><rect x="40" y="20" width="30" height="10" fill="%23DAF7A6"/><path d="M70,25 L90,15 L90,35 Z" fill="%23C70039"/></svg>') no-repeat center;
            background-size: contain;
            z-index: 10;
        }
        .enemy-plane {
            position: absolute;
            width: 80px;
            height: 40px;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 80 40"><!-- Avião inimigo em estilo cartoon 3D --><path d="M10,20 L20,5 L60,5 L70,20 L60,35 L20,35 Z" fill="%235D6D7E"/><circle cx="30" cy="20" r="4" fill="%23E74C3C"/><rect x="40" y="15" width="20" height="10" fill="%23ECF0F1"/><path d="M55,20 L70,10 L70,30 Z" fill="%2327AE60"/></svg>') no-repeat center;
            background-size: contain;
            top: -40px;
        }
        .bullet {
            position: absolute;
            width: 6px;
            height: 12px;
            background: #FF5733;
            border-radius: 3px;
        }
        .enemy-bullet {
            position: absolute;
            width: 6px;
            height: 12px;
            background: #E74C3C;
            border-radius: 3px;
        }
        #controls {
            position: absolute;
            bottom: 20px;
            width: 100%;
            display: flex;
            justify-content: space-between;
            padding: 0 20px;
            z-index: 20;
        }
        .control-btn {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            border: none;
            background: rgba(0, 0, 0, 0.5);
            color: white;
            font-size: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s;
        }
        .control-btn:active {
            background: rgba(0, 0, 0, 0.8);
            transform: scale(0.95);
        }
        #score {
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            color: white;
            font-size: 24px;
            background: rgba(0, 0, 0, 0.5);
            padding: 10px 20px;
            border-radius: 10px;
            z-index: 20;
        }
        #game-over {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: white;
            z-index: 30;
            font-size: 36px;
        }
        #restart-btn {
            margin-top: 20px;
            padding: 10px 20px;
            font-size: 20px;
            background: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
    </style>
</head>
<body>

    

    <div id="game-container">
        <div id="sky">
            <div class="cloud" style="width: 100px; height: 40px; top: 50px; left: -100px;"></div>
            <div class="cloud" style="width: 150px; height: 60px; top: 100px; left: -150px; animation-delay: 5s;"></div>
            <div class="cloud" style="width: 80px; height: 30px; top: 30px; left: -80px; animation-delay: 10s;"></div>
        </div>

        <div id="player-plane"></div>
        <div id="score">Pontos: 0</div>
        <div id="game-over">
            <h1>GAME OVER</h1>
            <p id="final-score">Sua pontuação: 0</p>
            <button id="restart-btn">Reiniciar</button>
        </div>
        <div id="controls">
            <button id="left-btn" class="control-btn">←</button>
            <div>
                <button id="fire-btn" class="control-btn">↑</button>
            </div>
            <button id="right-btn" class="control-btn">→</button>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Configurações do jogo
        const config = {
            playerSpeed: 8,
            enemySpeed: 2,
            enemySpawnRate: 2000,
            bulletSpeed: 12,
            enemyBulletSpeed: 6,
            enemyFireRate: 3000,
            gameWidth: window.innerWidth,
            gameHeight: window.innerHeight
        };
        // Elementos DOM
        const playerPlane = document.getElementById('player-plane');
        const gameContainer = document.getElementById('game-container');
        const leftBtn = document.getElementById('left-btn');
        const rightBtn = document.getElementById('right-btn');
        const fireBtn = document.getElementById('fire-btn');
        const scoreElement = document.getElementById('score');
        const gameOverElement = document.getElementById('game-over');
        const finalScoreElement = document.getElementById('final-score');
        const restartBtn = document.getElementById('restart-btn');
        // Variáveis de jogo
        let playerPosition = { x: config.gameWidth / 2, y: config.gameHeight - 100 };
        let enemies = [];
        let bullets = [];
        let enemyBullets = [];
        let score = 0;
        let gameActive = true;
        let lastEnemySpawn = 0;
        let lastEnemyFire = 0;
        let isMovingLeft = false;
        let isMovingRight = false;
        // Inicialização
        function init() {
            playerPlane.style.left = playerPosition.x + 'px';
            updateScore();
            // Eventos de botão
            leftBtn.addEventListener('touchstart', () => isMovingLeft = true);
            leftBtn.addEventListener('mousedown', () => isMovingLeft = true);
            leftBtn.addEventListener('touchend', () => isMovingLeft = false);
            leftBtn.addEventListener('mouseup', () => isMovingLeft = false);
            leftBtn.addEventListener('mouseleave', () => isMovingLeft = false);
            rightBtn.addEventListener('touchstart', () => isMovingRight = true);
            rightBtn.addEventListener('mousedown', () => isMovingRight = true);
            rightBtn.addEventListener('touchend', () => isMovingRight = false);
            rightBtn.addEventListener('mouseup', () => isMovingRight = false);
            rightBtn.addEventListener('mouseleave', () => isMovingRight = false);
            fireBtn.addEventListener('touchstart', fire);
            fireBtn.addEventListener('mousedown', fire);
            restartBtn.addEventListener('click', restartGame);
            // Eventos de teclado
            document.addEventListener('keydown', handleKeyDown);
            document.addEventListener('keyup', handleKeyUp);
            // Loop do jogo
            gameLoop();
        }
        // Controles
        function handleKeyDown(e) {
            if (e.key === 'ArrowLeft') isMovingLeft = true;
            if (e.key === 'ArrowRight') isMovingRight = true;
            if (e.key === ' ') fire();
        }
        function handleKeyUp(e) {
            if (e.key === 'ArrowLeft') isMovingLeft = false;
            if (e.key === 'ArrowRight') isMovingRight = false;
        }
        // Loop principal do jogo
        function gameLoop() {
            if (!gameActive) return;
            // Atualiza movimento do jogador
            if (isMovingLeft && playerPosition.x > 0) {
                playerPosition.x -= config.playerSpeed;
            }
            if (isMovingRight && playerPosition.x < config.gameWidth - 100) {
                playerPosition.x += config.playerSpeed;
            }
            update();
            render();
            requestAnimationFrame(gameLoop);
        }
        function update() {
            // Atualizar balas do jogador
            for (let i = bullets.length - 1; i >= 0; i--) {
                const bullet = bullets[i];
                bullet.y -= config.bulletSpeed;
                bullet.element.style.bottom = (config.gameHeight - bullet.y - 60) + 'px';
                // Remover balas que saíram da tela
                if (bullet.y < 0) {
                    gameContainer.removeChild(bullet.element);
                    bullets.splice(i, 1);
                }
            }
            // Atualizar balas inimigas
            for (let i = enemyBullets.length - 1; i >= 0; i--) {
                const bullet = enemyBullets[i];
                bullet.y += config.enemyBulletSpeed;
                bullet.element.style.top = bullet.y + 'px';
                // Verificar colisão com jogador
                if (bullet.y + 12 > config.gameHeight - 100 &&
                    bullet.x > playerPosition.x &&
                    bullet.x < playerPosition.x + 100) {
                    gameOver();
                }
                // Remover balas que saíram da tela
                if (bullet.y > config.gameHeight) {
                    gameContainer.removeChild(bullet.element);
                    enemyBullets.splice(i, 1);
                }
            }
            // Atualizar inimigos
            for (let i = enemies.length - 1; i >= 0; i--) {
                const enemy = enemies[i];
                enemy.y += config.enemySpeed;
                enemy.element.style.top = enemy.y + 'px';
                // Verificar colisão com balas do jogador
                for (let j = bullets.length - 1; j >= 0; j--) {
                    const bullet = bullets[j];
                    if (bullet.y < enemy.y + 40 &&
                        bullet.y > enemy.y &&
                        bullet.x > enemy.x &&
                        bullet.x < enemy.x + 80) {
                        // Colisão detectada
                        gameContainer.removeChild(enemy.element);
                        gameContainer.removeChild(bullet.element);
                        enemies.splice(i, 1);
                        bullets.splice(j, 1);
                        score += 10;
                        updateScore();
                        break;
                    }
                }
                // Verificar se inimigo chegou ao fundo
                if (enemy.y > config.gameHeight) {
                    gameContainer.removeChild(enemy.element);
                    enemies.splice(i, 1);
                }
            }
            // Spawn de inimigos
            const now = Date.now();
            if (now - lastEnemySpawn > config.enemySpawnRate) {
                spawnEnemy();
                lastEnemySpawn = now;
            }
            // Inimigos atiram
            if (now - lastEnemyFire > config.enemyFireRate && enemies.length > 0) {
                // Escolhe um inimigo aleatório para atirar
                const firingEnemy = enemies[Math.floor(Math.random() * enemies.length)];
                fireEnemyBullet(firingEnemy);
                lastEnemyFire = now;
            }
        }
        function render() {
            // Atualiza posição do jogador
            playerPlane.style.left = playerPosition.x + 'px';
        }
        function spawnEnemy() {
            const enemy = document.createElement('div');
            enemy.className = 'enemy-plane';
            const x = Math.random() * (config.gameWidth - 80);
            enemy.style.left = x + 'px';
            gameContainer.appendChild(enemy);
            enemies.push({
                element: enemy,
                x: x,
                y: -40
            });
        }
        function fireEnemyBullet(enemy) {
            const bullet = document.createElement('div');
            bullet.className = 'enemy-bullet';
            bullet.style.left = (enemy.x + 38) + 'px';
            bullet.style.top = (enemy.y + 40) + 'px';
            gameContainer.appendChild(bullet);
            enemyBullets.push({
                element: bullet,
                x: enemy.x + 38,
                y: enemy.y + 40
            });
        }
        function fire() {
            if (!gameActive) return;
            const bullet = document.createElement('div');
            bullet.className = 'bullet';
            bullet.style.left = (playerPosition.x + 48) + 'px';
            bullet.style.bottom = '60px';
            gameContainer.appendChild(bullet);
            bullets.push({
                element: bullet,
                x: playerPosition.x + 48,
                y: config.gameHeight - 100
            });
        }
        function updateScore() {
            scoreElement.textContent = 'Pontos: ' + score;
        }
        function gameOver() {
            gameActive = false;
            finalScoreElement.textContent = 'Sua pontuação: ' + score;
            gameOverElement.style.display = 'flex';
        }
        function restartGame() {
            // Remover todos os elementos do jogo
            document.querySelectorAll('.enemy-plane, .bullet, .enemy-bullet').forEach(el => {
                gameContainer.removeChild(el);
            });
            // Resetar variáveis
            enemies = [];
            bullets = [];
            enemyBullets = [];
            score = 0;
            gameActive = true;
            playerPosition.x = config.gameWidth / 2;
            playerPlane.style.left = playerPosition.x + 'px';
            isMovingLeft = false;
            isMovingRight = false;
            // Esconder tela de game over
            gameOverElement.style.display = 'none';
            updateScore();
            // Reiniciar loop do jogo
            gameLoop();
        }
        // Ajustar tamanho ao redimensionar a tela
        window.addEventListener('resize', () => {
            config.gameWidth = window.innerWidth;
            config.gameHeight = window.innerHeight;
        });
        // Iniciar o jogo
        init();
    </script>

<script>
function enableAudio() {
    const bg = document.getElementById("bgMusic");
    bg.volume = 0.6;
    bg.play().catch(() => {}); 
    document.removeEventListener("click", enableAudio);
    document.removeEventListener("keydown", enableAudio);
    document.removeEventListener("touchstart", enableAudio);
}

document.addEventListener("click", enableAudio);
document.addEventListener("keydown", enableAudio);
document.addEventListener("touchstart", enableAudio);
</script>

    
</body>
</html>
